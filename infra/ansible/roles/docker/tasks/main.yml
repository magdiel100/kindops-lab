---
- name: Verificar se docker ja existe
  ansible.builtin.command: docker --version
  register: docker_check
  changed_when: false
  failed_when: false

- name: Aviso quando docker ja estiver instalado
  ansible.builtin.debug:
    msg: "Docker ja instalado: {{ docker_check.stdout }}"
  when: docker_check.rc == 0

- name: Instalar docker via apt
  ansible.builtin.apt:
    name: docker.io
    state: present
    update_cache: true
  when: docker_check.rc != 0

- name: Habilitar e iniciar docker
  ansible.builtin.service:
    name: docker
    enabled: true
    state: started
  when: docker_check.rc != 0
